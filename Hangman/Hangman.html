<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman</title>
</head>
<body>
    <h1 id="displayed_text"></h1>
    <h5 id="chance_text">-</h5>

    <button onclick="check('a');">a</button>
    <button onclick="check('b');">b</button>
    <button onclick="check('c');">c</button>
    <button onclick="check('d');">d</button>
    <button onclick="check('e');">e</button>
    <button onclick="check('f');">f</button>
    <button onclick="check('g');">g</button>
    <button onclick="check('h');">h</button>
    <button onclick="check('i');">i</button>
    <button onclick="check('j');">j</button>
    <button onclick="check('k');">k</button>
    <button onclick="check('l');">l</button>
    <button onclick="check('m');">m</button>

    <br>

    <button onclick="check('n');">n</button>
    <button onclick="check('o');">o</button>
    <button onclick="check('p');">p</button>
    <button onclick="check('q');">q</button>
    <button onclick="check('r');">r</button>
    <button onclick="check('s');">s</button>
    <button onclick="check('t');">t</button>
    <button onclick="check('u');">u</button>
    <button onclick="check('v');">v</button>
    <button onclick="check('w');">w</button>
    <button onclick="check('x');">x</button>
    <button onclick="check('y');">y</button>
    <button onclick="check('z');">z</button>

    <h3 id="Textbox"></h3>
    <script>
        let words = ['paper' , 'green' , 'hand' , 'book' , 'phone' , 'psychology'];
        let displayed_text = document.getElementById("displayed_text").textContent;
        let lettersArray = [];
        let chance_count = 0;
            
        function getRandomArbitrary(min, max) {
            return Math.floor(Math.random() * (max - min) + min);
        }

        let random_index = getRandomArbitrary(0,6);
        let the_word = words[random_index];

        function refresh() {
            document.getElementById("displayed_text").textContent = displayed_text;
            if (9 - chance_count >= 0) {
                document.getElementById("chance_text").textContent = 9 - chance_count;
            }
        }

        for (letter_index in the_word) {
            displayed_text += " _";
        }

        displayed_text.trim();
        refresh();

        console.log(the_word);

        function getLettersArray() {
            lettersArray = displayed_text.split(" ");
            lettersArray.shift();
        }

        function display_refresh() {
            displayed_text = "";
            for (i of lettersArray) {
                displayed_text += (" " + i);
            }
            displayed_text.trim();
        }

        function correct_check() {
            if (chance_count > 8) {
                let count_incorrect = 0;
                for (letter of lettersArray) {
                    if (letter == "_") {
                        count_incorrect += 1;
                    }
                }
                if (count_incorrect <= 0) {
                    document.getElementById("Textbox").textContent = "Congrats*! :)";
                } else {
                    document.getElementById("Textbox").textContent = "You've Lost! :(";
                }
            
            } else {
                let count_incorrect = 0;
                for (letter of lettersArray) {
                    if (letter == "_") {
                        count_incorrect += 1;
                    }
                }
                if (count_incorrect <= 0) {
                    document.getElementById("Textbox").textContent = "Congrats*! :)";
                }
            }
        }

        function check(the_letter) {
            if (chance_count <= 8) {
                getLettersArray();
                for(letter_index in the_word) {
                    if(the_word[letter_index] == the_letter) {
                        lettersArray[letter_index] = the_letter;
                    }
                }
                display_refresh();
                chance_count += 1;
                refresh();
                correct_check();
            }
        }
    </script>
</body>
</html>